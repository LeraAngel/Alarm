{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"label\", \"value\", \"onChange\", \"style\", \"locale\", \"validRange\", \"inputMode\", \"withModal\", \"withDateFormatInLabel\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport * as React from 'react';\nimport TextInputWithMask from \"../TextInputMask\";\nimport { HelperText, IconButton, useTheme } from 'react-native-paper';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport DatePickerModal from \"./DatePickerModal\";\nimport useDateInput from \"./inputUtils\";\nimport { useLatest } from \"../utils\";\n\nfunction DatePickerInput(_ref, ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      onChange = _ref.onChange,\n      style = _ref.style,\n      locale = _ref.locale,\n      validRange = _ref.validRange,\n      inputMode = _ref.inputMode,\n      _ref$withModal = _ref.withModal,\n      withModal = _ref$withModal === void 0 ? true : _ref$withModal,\n      _ref$withDateFormatIn = _ref.withDateFormatInLabel,\n      withDateFormatInLabel = _ref$withDateFormatIn === void 0 ? true : _ref$withDateFormatIn,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var theme = useTheme();\n\n  var _useDateInput = useDateInput({\n    locale: locale,\n    value: value,\n    validRange: validRange,\n    inputMode: inputMode,\n    onChange: onChange\n  }),\n      formattedValue = _useDateInput.formattedValue,\n      inputFormat = _useDateInput.inputFormat,\n      onChangeText = _useDateInput.onChangeText,\n      error = _useDateInput.error;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      visible = _React$useState2[0],\n      setVisible = _React$useState2[1];\n\n  var onDismiss = React.useCallback(function () {\n    setVisible(false);\n  }, [setVisible]);\n  var onChangeRef = useLatest(onChange);\n  var onInnerConfirm = React.useCallback(function (_ref2) {\n    var date = _ref2.date;\n    setVisible(false);\n    onChangeRef.current(date);\n  }, [setVisible, onChangeRef]);\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.root\n  }, React.createElement(TextInputWithMask, _extends({}, rest, {\n    ref: ref,\n    label: getLabel({\n      label: label,\n      inputFormat: inputFormat,\n      withDateFormatInLabel: withDateFormatInLabel\n    }),\n    value: formattedValue,\n    keyboardType: 'number-pad',\n    placeholder: inputFormat,\n    mask: inputFormat,\n    onChangeText: onChangeText,\n    keyboardAppearance: theme.dark ? 'dark' : 'default',\n    error: !!error,\n    style: [styles.input, style]\n  })), withModal ? React.createElement(IconButton, {\n    size: 24,\n    style: styles.calendarButton,\n    icon: \"calendar\",\n    onPress: function onPress() {\n      return setVisible(true);\n    }\n  }) : null), React.createElement(HelperText, {\n    type: \"error\",\n    visible: !!error\n  }, error), withModal ? React.createElement(DatePickerModal, {\n    date: value,\n    mode: \"single\",\n    visible: visible,\n    onDismiss: onDismiss,\n    onConfirm: onInnerConfirm,\n    locale: locale,\n    dateMode: inputMode,\n    validRange: validRange\n  }) : null);\n}\n\nfunction getLabel(_ref3) {\n  var withDateFormatInLabel = _ref3.withDateFormatInLabel,\n      inputFormat = _ref3.inputFormat,\n      label = _ref3.label;\n\n  if (withDateFormatInLabel) {\n    return label ? label + \" (\" + inputFormat + \")\" : inputFormat;\n  }\n\n  return label || '';\n}\n\nvar styles = StyleSheet.create({\n  root: {\n    minWidth: 150,\n    flexDirection: 'row',\n    position: 'relative',\n    alignItems: 'center',\n    flexGrow: 1\n  },\n  input: {\n    flexGrow: 1\n  },\n  calendarButton: {\n    position: 'absolute',\n    right: 0,\n    zIndex: 10\n  }\n});\nexport default React.forwardRef(DatePickerInput);","map":{"version":3,"sources":["DatePickerInput.tsx"],"names":["withModal","withDateFormatInLabel","rest","theme","useTheme","error","useDateInput","locale","value","validRange","inputMode","onChange","React","onDismiss","setVisible","onChangeRef","useLatest","onInnerConfirm","date","styles","root","getLabel","label","inputFormat","minWidth","flexDirection","position","alignItems","flexGrow","input","calendarButton","right","zIndex"],"mappings":"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","sourcesContent":["import * as React from 'react'\n\nimport TextInputWithMask from '../TextInputMask'\nimport { HelperText, IconButton, TextInput, useTheme } from 'react-native-paper'\nimport { View, StyleSheet } from 'react-native'\nimport DatePickerModal from './DatePickerModal'\nimport useDateInput from './inputUtils'\nimport type { ValidRangeType } from './Calendar'\nimport { useLatest } from '../utils'\n\nfunction DatePickerInput(\n  {\n    label,\n    value,\n    onChange,\n    style,\n    locale,\n    validRange,\n    inputMode,\n    withModal = true,\n    withDateFormatInLabel = true,\n    ...rest\n  }: {\n    inputMode: 'start' | 'end'\n    locale: string\n    onChange: (date: Date | undefined) => void\n    value: Date | undefined\n    validRange?: ValidRangeType | undefined\n    withModal?: boolean\n    withDateFormatInLabel?: boolean\n  } & Omit<\n    React.ComponentProps<typeof TextInput>,\n    'value' | 'onChange' | 'onChangeText'\n  >,\n  ref: any\n) {\n  const theme = useTheme()\n  const { formattedValue, inputFormat, onChangeText, error } = useDateInput({\n    locale,\n    value,\n    validRange,\n    inputMode,\n    onChange,\n  })\n\n  const [visible, setVisible] = React.useState<boolean>(false)\n  const onDismiss = React.useCallback(() => {\n    setVisible(false)\n  }, [setVisible])\n  const onChangeRef = useLatest(onChange)\n  const onInnerConfirm = React.useCallback(\n    ({ date }) => {\n      setVisible(false)\n      onChangeRef.current(date)\n    },\n    [setVisible, onChangeRef]\n  )\n\n  return (\n    <>\n      <View style={styles.root}>\n        <TextInputWithMask\n          {...rest}\n          ref={ref}\n          label={getLabel({\n            // TODO: support label components?\n            label: label as any,\n            inputFormat,\n            withDateFormatInLabel,\n          })}\n          value={formattedValue}\n          keyboardType={'number-pad'}\n          placeholder={inputFormat}\n          mask={inputFormat}\n          onChangeText={onChangeText}\n          keyboardAppearance={theme.dark ? 'dark' : 'default'}\n          error={!!error}\n          style={[styles.input, style]}\n        />\n        {withModal ? (\n          <IconButton\n            size={24}\n            style={styles.calendarButton}\n            icon=\"calendar\"\n            onPress={() => setVisible(true)}\n          />\n        ) : null}\n      </View>\n      <HelperText type=\"error\" visible={!!error}>\n        {error}\n      </HelperText>\n\n      {withModal ? (\n        <DatePickerModal\n          date={value}\n          mode=\"single\"\n          visible={visible}\n          onDismiss={onDismiss}\n          onConfirm={onInnerConfirm}\n          locale={locale}\n          dateMode={inputMode}\n          validRange={validRange}\n        />\n      ) : null}\n    </>\n  )\n}\n\nfunction getLabel({\n  withDateFormatInLabel,\n  inputFormat,\n  label,\n}: {\n  withDateFormatInLabel: boolean\n  inputFormat: string\n  label: string | undefined\n}) {\n  if (withDateFormatInLabel) {\n    return label ? `${label} (${inputFormat})` : inputFormat\n  }\n  return label || ''\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    minWidth: 150,\n    flexDirection: 'row',\n    position: 'relative',\n    alignItems: 'center',\n    flexGrow: 1,\n  },\n  input: {\n    flexGrow: 1,\n  },\n  calendarButton: { position: 'absolute', right: 0, zIndex: 10 },\n})\nexport default React.forwardRef(DatePickerInput)\n"]},"metadata":{},"sourceType":"module"}