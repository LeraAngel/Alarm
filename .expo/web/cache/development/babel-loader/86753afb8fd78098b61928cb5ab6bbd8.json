{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport * as Notifications from 'expo-notifications';\nimport AppDefines from \"../defines/AppDefines\";\n\nvar Alarm = function () {\n  function Alarm() {\n    _classCallCheck(this, Alarm);\n  }\n\n  _createClass(Alarm, [{\n    key: \"getDate\",\n    value: function getDate() {\n      result = new Date();\n      result.setHours(this.hours);\n      result.setMinutes(this.minutes);\n      result.setSeconds(0);\n\n      if (result < new Date()) {\n        result = new Date(result.getTime() + 86400000);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      return _regeneratorRuntime.async(function activate$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.bIsActive = true;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(Notifications.scheduleNotificationAsync({\n                content: {\n                  title: AppDefines.text.titleNotification,\n                  data: {\n                    radioUri: this.radioUri,\n                    radioName: this.radioName\n                  }\n                },\n                trigger: {\n                  hour: this.hours,\n                  minute: this.minutes,\n                  repeats: true\n                }\n              }));\n\n            case 3:\n              this.notifyId = _context.sent;\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"deactivate\",\n    value: function deactivate() {\n      return _regeneratorRuntime.async(function deactivate$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              this.bIsActive = false;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(Notifications.cancelScheduledNotificationAsync(this.notifyId));\n\n            case 4:\n              _context2.next = 9;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(\"[Alarm] Could not cancel notification with \" + _context2.t0);\n\n            case 9:\n              this.notifyId = '';\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, [[1, 6]], Promise);\n    }\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return this.bIsActive;\n    }\n  }], [{\n    key: \"fromDate\",\n    value: function fromDate(_ref) {\n      var date = _ref.date,\n          radio = _ref.radio;\n      alarm = new Alarm();\n      alarm.hours = date.getHours();\n      alarm.minutes = date.getMinutes();\n      alarm.radioName = radio.title;\n      alarm.radioUri = radio.uri;\n      alarm.notifyId = '';\n      alarm.bIsActive = false;\n      return alarm;\n    }\n  }, {\n    key: \"fromJson\",\n    value: function fromJson(_ref2) {\n      var jsonObject = _ref2.jsonObject;\n      alarm = new Alarm();\n      alarm.hours = jsonObject.hours;\n      alarm.minutes = jsonObject.minutes;\n      alarm.radioName = jsonObject.radioName;\n      alarm.radioUri = jsonObject.radioUri;\n      alarm.notifyId = jsonObject.notifyId;\n      alarm.bIsActive = jsonObject.bIsActive;\n      return alarm;\n    }\n  }]);\n\n  return Alarm;\n}();\n\nexport default Alarm;","map":{"version":3,"names":["Notifications","AppDefines","Alarm","result","Date","setHours","hours","setMinutes","minutes","setSeconds","getTime","bIsActive","scheduleNotificationAsync","content","title","text","titleNotification","data","radioUri","radioName","trigger","hour","minute","repeats","notifyId","cancelScheduledNotificationAsync","console","log","date","radio","alarm","getHours","getMinutes","uri","jsonObject"],"sources":["C:/Users/lera-/StudioProjects/React/task2/framework/Alarm.js"],"sourcesContent":["import * as Notifications from 'expo-notifications';\n\nimport AppDefines from '../defines/AppDefines';\n\nclass Alarm {\n\n    static fromDate({ date, radio }) {\n        alarm = new Alarm();\n        alarm.hours = date.getHours();\n        alarm.minutes = date.getMinutes();\n        alarm.radioName = radio.title;\n        alarm.radioUri = radio.uri;\n        alarm.notifyId = '';\n        alarm.bIsActive = false;\n\n        return alarm;\n    }\n\n    static fromJson({ jsonObject }) {\n        alarm = new Alarm();\n        alarm.hours = jsonObject.hours;\n        alarm.minutes = jsonObject.minutes;\n        alarm.radioName = jsonObject.radioName;\n        alarm.radioUri = jsonObject.radioUri;\n        alarm.notifyId = jsonObject.notifyId;\n        alarm.bIsActive = jsonObject.bIsActive;\n\n        return alarm;\n    }\n\n    getDate() {\n        result = new Date();\n        result.setHours(this.hours);\n        result.setMinutes(this.minutes);\n        result.setSeconds(0);\n\n        // Ensure the date is in future\n        if (result < new Date()) {\n            result = new Date(result.getTime() + 86400000);\n        }\n\n        return result;\n    }\n\n    async activate() {\n        this.bIsActive = true;\n        this.notifyId = await Notifications.scheduleNotificationAsync({\n            content: {\n                title: AppDefines.text.titleNotification,\n                data: {\n                    radioUri: this.radioUri,\n                    radioName: this.radioName,\n                },\n            },\n            trigger: {\n                hour: this.hours,\n                minute: this.minutes,\n                repeats: true,\n            },\n        });\n    }\n\n    async deactivate() {\n        this.bIsActive = false;\n        try {\n            await Notifications.cancelScheduledNotificationAsync(this.notifyId);\n        } catch (e) {\n            console.log(\"[Alarm] Could not cancel notification with \" + e)\n        }\n        this.notifyId = '';\n    }\n\n    isActive() {\n        return this.bIsActive;\n    }\n}\n\nexport default Alarm;\n"],"mappings":";;;AAAA,OAAO,KAAKA,aAAZ,MAA+B,oBAA/B;AAEA,OAAOC,UAAP;;IAEMC,K;;;;;;;WA0BF,mBAAU;MACNC,MAAM,GAAG,IAAIC,IAAJ,EAAT;MACAD,MAAM,CAACE,QAAP,CAAgB,KAAKC,KAArB;MACAH,MAAM,CAACI,UAAP,CAAkB,KAAKC,OAAvB;MACAL,MAAM,CAACM,UAAP,CAAkB,CAAlB;;MAGA,IAAIN,MAAM,GAAG,IAAIC,IAAJ,EAAb,EAAyB;QACrBD,MAAM,GAAG,IAAIC,IAAJ,CAASD,MAAM,CAACO,OAAP,KAAmB,QAA5B,CAAT;MACH;;MAED,OAAOP,MAAP;IACH;;;WAED;MAAA;QAAA;UAAA;YAAA;cACI,KAAKQ,SAAL,GAAiB,IAAjB;cADJ;cAAA,iCAE0BX,aAAa,CAACY,yBAAd,CAAwC;gBAC1DC,OAAO,EAAE;kBACLC,KAAK,EAAEb,UAAU,CAACc,IAAX,CAAgBC,iBADlB;kBAELC,IAAI,EAAE;oBACFC,QAAQ,EAAE,KAAKA,QADb;oBAEFC,SAAS,EAAE,KAAKA;kBAFd;gBAFD,CADiD;gBAQ1DC,OAAO,EAAE;kBACLC,IAAI,EAAE,KAAKf,KADN;kBAELgB,MAAM,EAAE,KAAKd,OAFR;kBAGLe,OAAO,EAAE;gBAHJ;cARiD,CAAxC,CAF1B;;YAAA;cAEI,KAAKC,QAFT;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;;;WAkBA;MAAA;QAAA;UAAA;YAAA;cACI,KAAKb,SAAL,GAAiB,KAAjB;cADJ;cAAA;cAAA,iCAGcX,aAAa,CAACyB,gCAAd,CAA+C,KAAKD,QAApD,CAHd;;YAAA;cAAA;cAAA;;YAAA;cAAA;cAAA;cAKQE,OAAO,CAACC,GAAR,CAAY,4DAAZ;;YALR;cAOI,KAAKH,QAAL,GAAgB,EAAhB;;YAPJ;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;;;WAUA,oBAAW;MACP,OAAO,KAAKb,SAAZ;IACH;;;WApED,wBAAiC;MAAA,IAAfiB,IAAe,QAAfA,IAAe;MAAA,IAATC,KAAS,QAATA,KAAS;MAC7BC,KAAK,GAAG,IAAI5B,KAAJ,EAAR;MACA4B,KAAK,CAACxB,KAAN,GAAcsB,IAAI,CAACG,QAAL,EAAd;MACAD,KAAK,CAACtB,OAAN,GAAgBoB,IAAI,CAACI,UAAL,EAAhB;MACAF,KAAK,CAACX,SAAN,GAAkBU,KAAK,CAACf,KAAxB;MACAgB,KAAK,CAACZ,QAAN,GAAiBW,KAAK,CAACI,GAAvB;MACAH,KAAK,CAACN,QAAN,GAAiB,EAAjB;MACAM,KAAK,CAACnB,SAAN,GAAkB,KAAlB;MAEA,OAAOmB,KAAP;IACH;;;WAED,yBAAgC;MAAA,IAAdI,UAAc,SAAdA,UAAc;MAC5BJ,KAAK,GAAG,IAAI5B,KAAJ,EAAR;MACA4B,KAAK,CAACxB,KAAN,GAAc4B,UAAU,CAAC5B,KAAzB;MACAwB,KAAK,CAACtB,OAAN,GAAgB0B,UAAU,CAAC1B,OAA3B;MACAsB,KAAK,CAACX,SAAN,GAAkBe,UAAU,CAACf,SAA7B;MACAW,KAAK,CAACZ,QAAN,GAAiBgB,UAAU,CAAChB,QAA5B;MACAY,KAAK,CAACN,QAAN,GAAiBU,UAAU,CAACV,QAA5B;MACAM,KAAK,CAACnB,SAAN,GAAkBuB,UAAU,CAACvB,SAA7B;MAEA,OAAOmB,KAAP;IACH;;;;;;AAiDL,eAAe5B,KAAf"},"metadata":{},"sourceType":"module"}